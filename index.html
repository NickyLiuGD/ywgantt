<!doctype html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¯ç¼–è¾‘ç”˜ç‰¹å›¾gamma1</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css" rel="stylesheet" />
    
    <!-- å¯é€‰ï¼Œä»¥ä¸‹è¿™æ®µscriptä»£ç ç”¨äºå¼€å‘æ¨¡å¼ï¼Œå¼ºåˆ¶åœ¨æ¯æ¬¡åˆ·æ–°æ—¶é‡æ–°åŠ è½½æ‰€æœ‰çš„ä»£ç ã€‚åŠ¨æ€åŠ è½½è‡ªå®šä¹‰æ ·å¼ï¼ˆå¸¦æ—¶é—´æˆ³ï¼‰ -->
    <script>
        const timestamp = new Date().getTime();
        document.write('<link rel="stylesheet" href="css/gantt.css?t=' + timestamp + '">');
    </script>
</head>
<body>
    <div class="container-fluid">
        <h1 class="text-center mb-4">ğŸ“Š æ‰¬ç»´ç”˜ç‰¹å›¾æ¼”ç¤ºgamma1</h1>
        
        <!-- æ–°æ§åˆ¶é¢æ¿ -->
        <div class="controls">
            <div class="row">
                <div class="col-md-6">
                    <h5>ğŸ¯ ä»»åŠ¡ç®¡ç†</h5>
                    <div class="btn-group mb-3" role="group">
                        <button class="btn btn-primary btn-sm" id="addTask">
                            â• æ·»åŠ æ–°ä»»åŠ¡
                        </button>
                        <button class="btn btn-danger btn-sm" id="deleteTask">
                            ğŸ—‘ï¸ åˆ é™¤é€‰ä¸­ä»»åŠ¡
                        </button>
                        <button class="btn btn-success btn-sm" id="saveData">
                            ğŸ’¾ å¯¼å‡ºJsonæ–‡ä»¶
                        </button>
                        <button class="btn btn-info btn-sm" id="loadData">
                            ğŸ“‚ åŠ è½½Jsonæ–‡ä»¶
                        </button>
                    </div>
                    
                    <!-- å†²çªæ£€æµ‹æŒ‰é’®ç»„ -->
                    <div class="btn-group mb-3" role="group">
                        <button class="btn btn-warning btn-sm" id="checkConflicts">
                            ğŸ” æ£€æµ‹æ—¶é—´å†²çª
                        </button>
                        <button class="btn btn-secondary btn-sm" id="autoFixConflicts">
                            ğŸ”§ è‡ªåŠ¨ä¿®å¤å†²çª
                        </button>
                        <button class="btn btn-outline-secondary btn-sm" id="clearHighlights">
                            ğŸ”„ æ¸…é™¤é«˜äº®
                        </button>
                    </div>
                    
                    <div id="taskFormContainer"></div>
                </div>
                
                <div class="col-md-6">
                    <h5>âš™ï¸ ç¼–è¾‘è®¾ç½®</h5>
                    <div class="form-check form-switch mb-2">
                        <input class="form-check-input" type="checkbox" id="enableEdit" checked>
                        <label class="form-check-label" for="enableEdit">
                            ğŸ–±ï¸ å¯ç”¨æ‹–æ‹½ç§»åŠ¨ä»»åŠ¡
                        </label>
                    </div>
                    <div class="form-check form-switch mb-2">
                        <input class="form-check-input" type="checkbox" id="enableResize" checked>
                        <label class="form-check-label" for="enableResize">
                            â†”ï¸ å¯ç”¨æ‹–æ‹½è°ƒæ•´æ—¶é•¿
                        </label>
                    </div>
                    <div class="form-check form-switch mb-3">
                        <input class="form-check-input" type="checkbox" id="showWeekends" checked>
                        <label class="form-check-label" for="showWeekends">
                            ğŸ“… æ˜¾ç¤ºå‘¨æœ«
                        </label>
                    </div>
                    <div class="form-check form-switch mb-2">
                        <input class="form-check-input" type="checkbox" id="showDependencies" checked>
                        <label class="form-check-label" for="showDependencies">ğŸ”— æ˜¾ç¤ºä¾èµ–ç®­å¤´</label>
                    </div>
                    <div class="mb-2">
                        <label class="form-label">ğŸ“ æ—¶é—´è½´å¯†åº¦: <span id="cellWidthValue">60</span>px</label>
                        <input type="range" class="form-range" id="cellWidth" min="40" max="100" value="60" step="10">
                    </div>
                </div>
            </div>
            
            <div class="row mt-3">
                <div class="col-12">
                    <h5>ğŸ“‹ æ“ä½œæ—¥å¿—</h5>
                    <div class="log-area" id="logArea"></div>
                </div>
            </div>
        </div>
        
        <!-- ç”˜ç‰¹å›¾æ˜¾ç¤ºåŒºåŸŸ -->
        <div class="gantt-container">
            <div id="gantt"></div>
        </div>
    </div>
    
    <!-- JavaScript åŠ¨æ€åŠ è½½ï¼ˆå¸¦æ—¶é—´æˆ³é˜²æ­¢ç¼“å­˜ï¼‰ -->
    <script>
        (function() {
            const timestamp = new Date().getTime();
            const scripts = [
                'js/utils.js',              // 1. å·¥å…·å‡½æ•°
                'js/gantt-chart.js',        // 2. æ ¸å¿ƒç±»
                'js/gantt-events.js',       // 3. äº‹ä»¶æ‰©å±•
                'js/gantt-conflicts.js',    // 4. å†²çªæ£€æµ‹æ¨¡å—
                'js/app.js'                 // 5. åº”ç”¨åˆå§‹åŒ–
            ];
            
            // åŒæ­¥åŠ è½½è„šæœ¬ï¼ˆä¿è¯é¡ºåºï¼‰
            scripts.forEach(function(src) {
                document.write('<script src="' + src + '?t=' + timestamp + '"><\/script>');
            });
        })();
    </script>
    
    <!-- åŠ è½½æ£€æµ‹å’Œé”™è¯¯æç¤º -->
    <script>
        window.addEventListener('load', function() {
            setTimeout(function() {
                // æ£€æµ‹å…³é”®å¯¹è±¡
                const checks = {
                    'GanttChartç±»': typeof GanttChart !== 'undefined',
                    'ganttå®ä¾‹': typeof gantt !== 'undefined',
                    'å·¥å…·å‡½æ•°': typeof formatDate !== 'undefined',
                    'å†²çªæ£€æµ‹': typeof detectAllConflicts !== 'undefined'
                };
                
                const failed = Object.keys(checks).filter(key => !checks[key]);
                
                if (failed.length > 0) {
                    console.error('âŒ åŠ è½½å¤±è´¥çš„æ¨¡å—ï¼š', failed);
                    alert('âš ï¸ éƒ¨åˆ†æ¨¡å—åŠ è½½å¤±è´¥ï¼š' + failed.join(', '));
                } else {
                    console.log('âœ… æ‰€æœ‰æ¨¡å—åŠ è½½æˆåŠŸï¼');
                }
            }, 500);
        });
    </script>
    
    <!-- Bootstrap JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/js/bootstrap.bundle.min.js"></script>
</body>
</html>
